---
  - name: Install and configure tomcat
    hosts: 20.106.149.128
    gather_facts: false
    become: yes
    tasks:
       - name: updating repos
         yum:
           name: "*"
           state: latest
       - name: Installing required java
         yum:
           name: java-1.8.0-openjdk
           state: present
       - name: checking for alternative
         alternatives:
           name: java
           link: /usr/bin/java
           path: /usr/lib/jvm/jre-1.8.0-openjdk/bin/java
       - name: Downloading required tomcat
         get_url:
             url: https://downloads.apache.org/tomcat/tomcat-9/v9.0.50/bin/apache-tomcat-9.0.50.tar.gz
             dest: /usr/local
       - name: Extracting downloaded Tomcat
         unarchive:
             src: "/usr/local/apache-tomcat-9.0.50.tar.gz"
             dest: /usr/bin
             remote_src: yes
       - name: Renaming tomcat home
         command: mv /usr/bin/apache-tomcat-9.0.50 /usr/local/latest
       - name: Starting tomcat
         shell: nohup usr/local/latest/bin/startup.sh &
