---
  - name: Install and configure tomcat
    hosts: 20.106.159.195
    gather_facts: false
    tasks:
      - name: Updating repos
        yum:
          name: "*"
          state: latest
          become: yes
      - name: Installing required java
        yum:
          name: java-1.8.0-openjdk
          state: present
          become: yes
      - name:
        alternatives:
          name: java
          link: /usr/bin/java
          path: /usr/lib/jvm/jre-1.8.0-openjdk/bin/java
          become: yes
      - name: Downloading required java
        get_url:
          url: https://downloads.apache.org/tomcat/tomcat-9/v9.0.50/bin/apache-tomcat-9.0.50.tar.gz
          dest: /usr/local
        become: yes
      - name: Extracting downloaded Tomcat
        unarchive:
          src: "/usr/local/apache-tomcat-9.0.50.tar.gz"
          dest: /usr/bin
          remote_src: yes
        become: yes
      - name: Renaming tomcat home
        command: mv /usr/bin/apache-tomcat-9.0.50 /usr/bin/latest
        become: yes
      - name: Starting tomcat
        become: yes
        args:
          chdir: usr/bin/latest/bin
        shell: nohup usr/bin/latest/bin/startup.sh &
